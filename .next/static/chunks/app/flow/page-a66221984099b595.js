(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5129],{1012:function(t,e,r){Promise.resolve().then(r.bind(r,8418)),Promise.resolve().then(r.bind(r,1825))},1825:function(t,e,r){"use strict";r.d(e,{default:function(){return I}});var s=r(6871),n=r(8818),a=r(9335),i=r(8418),o=r(487),l=r(7437),c={small:24,medium:40,large:56},d={small:"text-xs",medium:"text-sm",large:"text-base"},u={small:"p-2 gap-2",medium:"p-4 gap-4",large:"p-6 gap-6"},f=function(t){var e=t.size,r=void 0===e?"medium":e,s=t.color,n=t.message,a=t.className,f=t.variant,g=void 0===f?"default":f,h=c[r],m=d[r],x=u[r],_=(0,o.Z)("flex flex-col items-center justify-center","inline"!==g&&x,{"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm":"fullPage"===g,"w-full h-full min-h-[100px]":"container"===g,"inline-flex !p-0 !gap-2":"inline"===g},a);return(0,l.jsxs)("div",{className:_,children:[(0,l.jsx)(i.default,{size:h,color:void 0===s?"secondary":s}),n&&(0,l.jsx)("p",{className:(0,o.Z)("text-foreground-light-secondary dark:text-foreground-dark-secondary text-center",m,"inline"===g?"m-0":"mt-2"),children:n})]})},g=r(385),h=r.n(g);function m(t){var e=t.task,r=t.isActive,s=t.flowScore,n=t.onSelect;return(0,l.jsxs)("div",{className:"".concat(h().taskItem," ").concat(r?h().active:""),onClick:function(){return n(e.id)},"data-testid":"task-item-".concat(e.id),children:[(0,l.jsxs)("div",{className:h().taskContent,children:[(0,l.jsx)("h3",{className:h().taskTitle,children:e.title}),(0,l.jsx)("p",{className:h().taskDescription,children:e.description}),e.due_date&&(0,l.jsxs)("div",{className:h().taskDueDate,children:["Due: ",new Date(e.due_date).toLocaleDateString()]})]}),(0,l.jsx)("div",{className:h().flowIndicator,style:{"--flow-score":"".concat(s,"%")},title:"Flow alignment: ".concat(Math.round(s),"%")})]})}function x(){var t=(0,n.O)(),e=t.currentSequence,r=t.routingResult,s=t.startNextTask,i=t.isRouting,o=(0,a.G2)().flowState;return i?(0,l.jsxs)("div",{className:h().loadingContainer,children:[(0,l.jsx)(f,{size:"medium"}),(0,l.jsx)("p",{children:"Optimizing task sequence..."})]}):e.length?(0,l.jsxs)("div",{className:h().container,"data-testid":"task-flow",children:[(0,l.jsx)("div",{className:h().taskList,children:e.map(function(t,n){var a,i=(a=e.length,r?100*r.routingFactors.flowAlignment*(1-n/a*.5):0),o=0===n;return(0,l.jsx)(m,{task:t,isActive:o,flowScore:i,onSelect:function(){return s()}},t.id)})}),o&&r&&(0,l.jsxs)("div",{className:h().flowInfo,children:[(0,l.jsxs)("div",{className:h().flowMetric,children:[(0,l.jsx)("span",{children:"Current Flow Score"}),(0,l.jsxs)("strong",{children:[o.score,"%"]})]}),(0,l.jsxs)("div",{className:h().flowMetric,children:[(0,l.jsx)("span",{children:"Task Alignment"}),(0,l.jsxs)("strong",{children:[Math.round(100*r.routingFactors.flowAlignment),"%"]})]})]})]}):(0,l.jsxs)("div",{className:h().emptyState,children:[(0,l.jsx)("h2",{children:"No Tasks Available"}),(0,l.jsx)("p",{children:"Add some tasks to get started with flow-optimized work."})]})}var _=r(46),p=r.n(_);function k(t){var e=t.children,r=t.loadingMessage,s=void 0===r?"Loading...":r,n=t.testId,a=t.isLoading,i=t.spinnerSize,o=t.className,c=void 0===o?"":o;return void 0!==a&&a?(0,l.jsxs)("div",{className:"".concat(p().loadingContainer," ").concat(c),"data-testid":"".concat(n,"-loading"),children:[(0,l.jsx)(f,{size:void 0===i?"medium":i}),s&&(0,l.jsx)("p",{className:p().message,children:s})]}):(0,l.jsx)("div",{className:c,"data-testid":n,children:e})}var y=r(5685),v=r(26),j=r(4779),w=r(1322),b=r(9125),N=r(5300),S=r(4513),T=r(6314),O=function(t){var e=t.error,r=t.onRetry,s=t.onDismiss;return e?(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm",children:(0,l.jsxs)("div",{className:"w-full max-w-md rounded-lg bg-background-light p-6 text-center shadow-xl dark:bg-background-dark",children:[(0,l.jsxs)("div",{className:"mb-4 text-5xl text-warning-light dark:text-warning-dark mx-auto w-fit",children:[" ",(0,l.jsx)(T.Z,{size:48,strokeWidth:1.5})," "]}),(0,l.jsx)("h3",{className:"mb-2 text-xl font-semibold text-error-light dark:text-error-dark",children:e.code||"An Error Occurred"}),(0,l.jsx)("p",{className:"mb-6 text-foreground-light-secondary dark:text-foreground-dark-secondary",children:e.message}),e.details&&(0,l.jsx)("pre",{className:"mb-6 max-h-40 overflow-y-auto whitespace-pre-wrap rounded bg-background-light-secondary p-3 text-left text-xs text-foreground-light-secondary dark:bg-background-dark-secondary dark:text-foreground-dark-secondary",children:JSON.stringify(e.details,null,2)}),(0,l.jsxs)("div",{className:"flex justify-center gap-4",children:[r&&(0,l.jsx)("button",{onClick:r,className:"rounded px-6 py-2 font-semibold text-white bg-success-light transition-colors hover:bg-success-light/90 focus:outline-none focus:ring-2 focus:ring-success-light focus:ring-offset-2 dark:bg-success-dark dark:hover:bg-success-dark/90 dark:focus:ring-offset-background-dark",children:"Try Again"}),s&&(0,l.jsx)("button",{onClick:s,className:"rounded px-6 py-2 font-semibold border border-border-light bg-transparent text-foreground-light transition-colors hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 dark:border-border-dark dark:text-foreground-dark dark:hover:bg-gray-700 dark:focus:ring-offset-background-dark",children:"Dismiss"})]})]})}):null},C=r(1258),R=r.n(C),E=function(t){(0,w.Z)(s,t);var e,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,r=(0,N.Z)(s);return t=e?Reflect.construct(r,arguments,(0,N.Z)(this).constructor):r.apply(this,arguments),(0,b.Z)(this,t)});function s(){var t;(0,y.Z)(this,s);for(var e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];return t=r.call.apply(r,[this].concat(n)),(0,S.Z)((0,j.Z)(t),"state",{hasError:!1,error:null}),(0,S.Z)((0,j.Z)(t),"handleRetry",function(){t.setState({hasError:!1,error:null})}),t}return(0,v.Z)(s,[{key:"componentDidCatch",value:function(t,e){this.props.onError&&this.props.onError(t,e)}},{key:"render",value:function(){return this.state.hasError&&this.state.error?this.props.fallback?this.props.fallback(this.state.error):(0,l.jsxs)("div",{className:R().errorContainer,children:[(0,l.jsx)(O,{error:{code:"BOUNDARY_ERROR",message:"An unexpected error occurred",details:this.state.error}}),(0,l.jsx)("button",{onClick:this.handleRetry,className:R().retryButton,children:"Try Again"})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(t){return{hasError:!0,error:t}}}]),s}(s.Component),A=r(3184),D=r.n(A);function F(t){var e=t.flowState,r=t.routingResult,s=t.onStartNextTask,n=t.hasNextTask;return(0,l.jsxs)("div",{className:D().statsCard,children:[(0,l.jsx)("h2",{className:D().statsTitle,children:"Flow Stats"}),e&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:D().stat,children:[(0,l.jsx)("label",{children:"Current Flow Score"}),(0,l.jsxs)("div",{className:D().value,children:[e.score,"%"]})]}),(0,l.jsxs)("div",{className:D().stat,children:[(0,l.jsx)("label",{children:"Flow Intensity"}),(0,l.jsxs)("div",{className:"".concat(D().value," ").concat(D().intensity),children:[e.intensity,"%"]})]}),r&&(0,l.jsxs)("div",{className:D().stat,children:[(0,l.jsx)("label",{children:"Task Alignment"}),(0,l.jsxs)("div",{className:"".concat(D().value," ").concat(D().alignment),children:[Math.round(100*r.routingFactors.flowAlignment),"%"]})]})]}),n&&(0,l.jsx)("button",{onClick:s,className:D().actionButton,"data-testid":"start-next-task",children:"Start Next Task"})]})}function I(){var t=(0,n.O)(),e=t.routingResult,r=t.currentSequence,i=t.isRouting,o=t.error,c=t.routeTasks,d=t.startNextTask,u=t.setError,f=(0,a.G2)().flowState;return((0,s.useEffect)(function(){if(f&&null!=e&&e.routingFactors.flowAlignment){var t=100*e.routingFactors.flowAlignment;Math.abs(f.score-t)>20&&c(r)}},[null==f?void 0:f.score,null==e?void 0:e.routingFactors.flowAlignment,c,r]),o)?(0,l.jsxs)("div",{className:D().errorContainer,children:[(0,l.jsx)(O,{error:o}),(0,l.jsx)("button",{onClick:function(){u(null),c(r)},className:D().retryButton,children:"Retry"})]}):(0,l.jsx)(E,{children:(0,l.jsx)("main",{className:D().container,children:(0,l.jsx)(k,{isLoading:i,loadingMessage:"Optimizing your flow state...",testId:"flow-manager",children:(0,l.jsxs)("div",{className:D().content,children:[(0,l.jsxs)("div",{className:D().header,children:[(0,l.jsx)("h1",{className:D().title,children:"Flow-Optimized Tasks"}),(0,l.jsx)("p",{className:D().description,children:"Tasks are automatically organized based on your current flow state and optimal work patterns."})]}),(0,l.jsxs)("div",{className:D().grid,children:[(0,l.jsx)("div",{className:D().mainContent,children:(0,l.jsx)(x,{})}),(0,l.jsx)("aside",{className:D().sidebar,children:f&&(0,l.jsx)(F,{flowState:f,routingResult:e,onStartNextTask:d,hasNextTask:r.length>0})})]})]})})})})}},9335:function(t,e,r){"use strict";r.d(e,{G2:function(){return f},On:function(){return u}});var s=r(4513),n=r(6871),a=r(7437);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,s)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach(function(e){(0,s.Z)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var l={userId:"",score:0,intensity:0,status:"rest",activeTime:0,lastUpdated:new Date().toISOString()},c=(0,n.createContext)(null);function d(t,e){return"UPDATE_FLOW_STATE"===e.type?o(o({},t),e.payload):t}var u=function(t){var e=t.children,r=t.initialFlowState,s=(0,n.useReducer)(d,o(o(o({},l),void 0===r?{}:r),{},{lastUpdated:new Date().toISOString()})),i=s[0],u=s[1];return(0,a.jsx)(c.Provider,{value:{flowState:i,updateFlowState:function(t){u({type:"UPDATE_FLOW_STATE",payload:t})}},children:e})};function f(){var t=(0,n.useContext)(c);if(!t)throw Error("useFlowContext must be used within a FlowProvider");return t}},8818:function(t,e,r){"use strict";r.d(e,{H:function(){return c},O:function(){return d}});var s=r(90),n=r(5977),a=r.n(n),i=r(6871),o=r(7437),l=(0,i.createContext)(null),c=function(t){var e,r,n=t.children,c=t.initialTasks,d=t.mockStartNextTask,u=t.mockRouteTasks,f=t.mockIsRouting,g=t.mockRoutingResult,h=t.mockError,m=(0,i.useState)(void 0===c?[]:c),x=m[0],_=m[1],p=(0,i.useState)(void 0===g?null:g),k=p[0],y=p[1],v=(0,i.useState)(void 0!==f&&f),j=v[0],w=v[1],b=(0,i.useState)(void 0===h?null:h),N=b[0],S=b[1],T=function(){N&&S(null)},O=d||(e=(0,s.Z)(a().mark(function t(e){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,w(!0),T(),e?x.find(function(t){return t.id===e}):x[0]){t.next=6;break}throw Error("Task not found");case 6:w(!1),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),w(!1),S({code:"TASK_START_ERROR",message:"Failed to start task",details:t.t0 instanceof Error?t.t0:Error(String(t.t0))});case 13:case"end":return t.stop()}},t,null,[[0,9]])})),function(t){return e.apply(this,arguments)}),C=u||(r=(0,s.Z)(a().mark(function t(e){var r;return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{w(!0),T(),_(e),r={suggestedSequence:e,routingFactors:{flowAlignment:.85,timingOptimality:.9,workloadBalance:.8,contextContinuity:.75,taskScores:e.reduce(function(t,e,r){return t[e.id]=.9-.1*r,t},{})},recommendations:["Focus on the first task in the sequence"],metadata:{routingTimestamp:new Date().toISOString(),flowScore:85,sequenceScore:.85}},y(r),w(!1)}catch(t){w(!1),S({code:"TASK_ROUTING_ERROR",message:"Failed to route tasks",details:t instanceof Error?t:Error(String(t))})}case 1:case"end":return t.stop()}},t)})),function(t){return r.apply(this,arguments)});return(0,o.jsx)(l.Provider,{value:{currentSequence:x,routingResult:k,isRouting:j,error:N,startNextTask:O,routeTasks:C,setError:S},children:n})};function d(){var t=(0,i.useContext)(l);if(!t)throw Error("useTaskRouting must be used within a TaskRoutingProvider");return t}},3184:function(t){t.exports={container:"styles_container__o5I_z",content:"styles_content__Xtzc6",header:"styles_header__y6FKU",title:"styles_title___La0I",description:"styles_description__wSqSL",grid:"styles_grid__EdT2r",mainContent:"styles_mainContent___AOnS",sidebar:"styles_sidebar__6228u",statsCard:"styles_statsCard__XZuXW",statsTitle:"styles_statsTitle__97d_P",stat:"styles_stat__5_Byk",value:"styles_value__qDCcJ",intensity:"styles_intensity__3QCqm",alignment:"styles_alignment__lyYTi",actionButton:"styles_actionButton__Yg_0Q",errorContainer:"styles_errorContainer__AEYV1",retryButton:"styles_retryButton__LwAiF"}},385:function(t){t.exports={container:"styles_container__duKEp",taskList:"styles_taskList__Nd584",taskItem:"styles_taskItem__2oMY9",active:"styles_active__G1z_s",taskContent:"styles_taskContent__N3Xq_",taskTitle:"styles_taskTitle__5J82r",taskDescription:"styles_taskDescription__H3tQl",taskDueDate:"styles_taskDueDate___UGwf",flowIndicator:"styles_flowIndicator__T8kvK",loadingContainer:"styles_loadingContainer__hxsfm",emptyState:"styles_emptyState__5UgAu",flowInfo:"styles_flowInfo__gP2gp",flowMetric:"styles_flowMetric__hGWk9"}},1258:function(t){t.exports={errorContainer:"styles_errorContainer__K_m3v",retryButton:"styles_retryButton__Ia1z9"}},46:function(t){t.exports={loadingContainer:"styles_loadingContainer__5RQ3M",message:"styles_message__LM1_f",fadeIn:"styles_fadeIn__HlBrb",fullHeight:"styles_fullHeight__3Op8q",transparent:"styles_transparent__3abSa"}}},function(t){t.O(0,[1264,8293,2971,529,1744],function(){return t(t.s=1012)}),_N_E=t.O()}]);