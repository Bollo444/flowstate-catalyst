(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{5549:function(e,t,n){Promise.resolve().then(n.t.bind(n,2778,23)),Promise.resolve().then(n.bind(n,74)),Promise.resolve().then(n.bind(n,5708))},9311:function(e,t,n){"use strict";var r=n(5977),o=n(9985);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,u=Object.prototype.hasOwnProperty,l={};!function(e,t){for(var n in t)a(e,n,{get:t[n],enumerable:!0})}(l,{SessionContextProvider:function(){return h},useSession:function(){return b},useSessionContext:function(){return v},useSupabaseClient:function(){return y},useUser:function(){return m}}),e.exports=function(e,t,n,r){if(t&&"object"==typeof t||"function"==typeof t){var o,l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,void 0)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}(c(t));try{for(l.s();!(o=l.n()).done;)!function(){var n=o.value;u.call(e,n)||void 0===n||a(e,n,{get:function(){return t[n]},enumerable:!(r=s(t,n))||r.enumerable})}()}catch(e){l.e(e)}finally{l.f()}}return e}(a({},"__esModule",{value:!0}),l);var f=n(6871),d=n(7437),p=(0,f.createContext)({isLoading:!0,session:null,error:null,supabaseClient:{}}),h=function(e){var t=e.supabaseClient,n=e.initialSession,i=void 0===n?null:n,a=e.children,s=o((0,f.useState)(i),2),c=s[0],u=s[1],l=o((0,f.useState)(!i),2),h=l[0],v=l[1],y=o((0,f.useState)(),2),b=y[0],m=y[1];(0,f.useEffect)(function(){!c&&i&&u(i)},[c,i]),(0,f.useEffect)(function(){var e=!0;return function(){var n,o;n=this,o=r.mark(function n(){var o,i,a;return r.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.auth.getSession();case 2:if(i=(o=n.sent).data.session,a=o.error,!e){n.next=12;break}if(!a){n.next=10;break}return m(a),v(!1),n.abrupt("return");case 10:u(i),v(!1);case 12:case"end":return n.stop()}},n)}),new Promise(function(e,t){var r=function(e){try{a(o.next(e))}catch(e){t(e)}},i=function(e){try{a(o.throw(e))}catch(e){t(e)}},a=function(t){return t.done?e(t.value):Promise.resolve(t.value).then(r,i)};a((o=o.apply(n,null)).next())})}(),function(){e=!1}},[]),(0,f.useEffect)(function(){var e=t.auth.onAuthStateChange(function(e,t){t&&("SIGNED_IN"===e||"TOKEN_REFRESHED"===e||"USER_UPDATED"===e)&&u(t),"SIGNED_OUT"===e&&u(null)}).data.subscription;return function(){e.unsubscribe()}},[]);var w=(0,f.useMemo)(function(){return h?{isLoading:!0,session:null,error:null,supabaseClient:t}:b?{isLoading:!1,session:null,error:b,supabaseClient:t}:{isLoading:!1,session:c,error:null,supabaseClient:t}},[h,c,b]);return(0,d.jsx)(p.Provider,{value:w,children:a})},v=function(){var e=(0,f.useContext)(p);if(void 0===e)throw Error("useSessionContext must be used within a SessionContextProvider.");return e};function y(){var e=(0,f.useContext)(p);if(void 0===e)throw Error("useSupabaseClient must be used within a SessionContextProvider.");return e.supabaseClient}var b=function(){var e=(0,f.useContext)(p);if(void 0===e)throw Error("useSession must be used within a SessionContextProvider.");return e.session},m=function(){var e,t,n=(0,f.useContext)(p);if(void 0===n)throw Error("useUser must be used within a SessionContextProvider.");return null!=(t=null==(e=n.session)?void 0:e.user)?t:null}},8969:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(5387),o=n(7110),i=n(4513),a=n(3366),s=n(6871),c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},u=["color","size","strokeWidth","absoluteStrokeWidth","className","children"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d=function(e,t){var n=(0,s.forwardRef)(function(n,i){var l=n.color,d=n.size,p=void 0===d?24:d,h=n.strokeWidth,v=void 0===h?2:h,y=n.absoluteStrokeWidth,b=n.className,m=n.children,w=(0,a.Z)(n,u);return(0,s.createElement)("svg",f(f({ref:i},c),{},{width:p,height:p,stroke:void 0===l?"currentColor":l,strokeWidth:y?24*Number(v)/Number(p):v,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()),void 0===b?"":b].join(" ")},w),[].concat((0,o.Z)(t.map(function(e){var t=(0,r.Z)(e,2),n=t[0],o=t[1];return(0,s.createElement)(n,o)})),(0,o.Z)(Array.isArray(m)?m:[m])))});return n.displayName="".concat(e),n}},74:function(e,t,n){"use strict";n.d(t,{Providers:function(){return w}});var r=n(8818),o=n(9335),i=n(6871),a=n(90),s=n(5977),c=n.n(s),u=n(9311),l=n(5685),f=n(26),d=n(4513),p=n(8839),h=function(){var e,t,n,r,o;function i(e){(0,l.Z)(this,i),(0,d.Z)(this,"syncState",null),(0,d.Z)(this,"listeners",new Set),(0,d.Z)(this,"supabase",p.OQ),this.teamId=e,console.warn("TeamFlowSync initialized for team ".concat(this.teamId,", but functionality is currently disabled."))}return(0,f.Z)(i,[{key:"initialize",value:(e=(0,a.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("TeamFlowSync initialize called, but sync logic is disabled."),e.next=3,Promise.resolve();case 3:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})},{key:"startSync",value:(t=(0,a.Z)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("TeamFlowSync startSync called, but sync logic is disabled.",t),e.abrupt("return","dummy-session-id");case 2:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})},{key:"updateParticipantState",value:(n=(0,a.Z)(c().mark(function e(t,n){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("TeamFlowSync updateParticipantState called, but sync logic is disabled.",t,n),e.next=3,Promise.resolve();case 3:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})},{key:"endSync",value:(r=(0,a.Z)(c().mark(function e(t,n){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("TeamFlowSync endSync called, but sync logic is disabled.",t,n),e.next=3,Promise.resolve();case 3:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})},{key:"broadcastFlowUpdate",value:(o=(0,a.Z)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("TeamFlowSync broadcastFlowUpdate called, but sync logic is disabled.",t),e.next=3,Promise.resolve();case 3:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)})},{key:"subscribe",value:function(e){var t=this;return console.warn("TeamFlowSync subscribe called, but sync logic is disabled."),this.teamId,new Date().toISOString(),new Date().toISOString(),function(){console.warn("TeamFlowSync unsubscribe called."),t.listeners.delete(e)}}},{key:"cleanup",value:function(){this.listeners.clear(),this.syncState=null,console.warn("TeamFlowSync minimal cleanup called.")}}]),i}(),v=function(e){var t,n,r,o=(0,u.useSupabaseClient)(),s=(0,i.useState)(null),l=s[0],f=s[1],d=(0,i.useState)(null),p=d[0],v=d[1],y=(0,i.useState)(!1),b=y[0],m=y[1],w=(0,i.useState)(null),x=w[0],k=w[1];(0,i.useEffect)(function(){var t,n=new h(e);return(t=(0,a.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.initialize();case 3:f(n),m(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),k(e.t0),console.error("Failed to initialize team sync:",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(){return t.apply(this,arguments)})(),function(){n.dispose()}},[e]),(0,i.useEffect)(function(){if(l){var e=l.subscribe(function(e){v(e)});return function(){e()}}},[l]);var S=(0,i.useCallback)((t=(0,a.Z)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}throw Error("Team sync not initialized");case 2:return e.prev=2,e.next=5,l.startSync(t);case 5:e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(2),k(e.t0),e.t0;case 11:case"end":return e.stop()}},e,null,[[2,7]])})),function(e){return t.apply(this,arguments)}),[l]),g=(0,i.useCallback)((n=(0,a.Z)(c().mark(function e(t){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!l||!p)){e.next=2;break}throw Error("No active sync session");case 2:return e.prev=2,e.next=5,l.endSync(p.sessionId,t);case 5:e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(2),k(e.t0),e.t0;case 11:case"end":return e.stop()}},e,null,[[2,7]])})),function(e){return n.apply(this,arguments)}),[l,p]),O=(0,i.useCallback)((r=(0,a.Z)(c().mark(function e(t,n){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}throw Error("Team sync not initialized");case 2:return e.prev=2,e.next=5,l.updateParticipantState(t,n);case 5:e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(2),k(e.t0),e.t0;case 11:case"end":return e.stop()}},e,null,[[2,7]])})),function(e,t){return r.apply(this,arguments)}),[l]);return(0,i.useEffect)(function(){if(b){var t,n=o.channel("team_syncs:".concat(e)).on("postgres_changes",{event:"*",schema:"public",table:"team_syncs",filter:"team_id=eq.".concat(e," AND status=eq.active")},(t=(0,a.Z)(c().mark(function e(t){var n;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("INSERT"===t.eventType&&l)){e.next=13;break}return e.next=3,o.auth.getUser();case 3:if(!((n=e.sent.data.user)&&t.new.participants.includes(n.id)&&!p)){e.next=13;break}return e.prev=5,e.next=8,l.startSync(t.new.participants);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.error("Failed to join sync session:",e.t0);case 13:case"end":return e.stop()}},e,null,[[5,10]])})),function(e){return t.apply(this,arguments)})).subscribe();return function(){o.removeChannel(n)}}},[e,b,l,p,o]),{syncState:p,isInitialized:b,error:x,startSync:S,endSync:g,updateParticipantState:O}},y=n(7437),b=(0,i.createContext)(null);function m(e){var t=e.children,n=v(e.teamId);return(0,y.jsx)(b.Provider,{value:n,children:t})}function w(e){var t=e.children,n=e.teamId;return(0,y.jsx)(o.On,{children:(0,y.jsx)(r.H,{children:n?(0,y.jsx)(m,{teamId:n,children:t}):t})})}},5708:function(e,t,n){"use strict";n.d(t,{default:function(){return d}}),n(6871);var r=n(8969),o=(0,r.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),i=(0,r.Z)("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]),a=(0,r.Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),s=(0,r.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),c=(0,r.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),u=(0,r.Z)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),l=n(3880),f=n(7437),d=function(){console.log("Sidebar component rendering");var e=[{icon:(0,f.jsx)(o,{className:"w-5 h-5"}),label:"Search",href:"/search"},{icon:(0,f.jsx)(i,{className:"w-5 h-5"}),label:"Inbox",href:"/inbox"},{icon:(0,f.jsx)(a,{className:"w-5 h-5"}),label:"Assigned to me",href:"/assigned-to-me"},{icon:(0,f.jsx)(s,{className:"w-5 h-5"}),label:"Created by me",href:"/created-by-me"},{icon:(0,f.jsx)(c,{className:"w-5 h-5"}),label:"Private tasks",href:"/private-tasks"},{icon:(0,f.jsx)(u,{className:"w-5 h-5"}),label:"More",href:"/more"}];return(0,f.jsxs)("aside",{className:"fixed left-0 top-0 w-64 h-screen bg-background-light-secondary text-foreground-light dark:bg-background-dark dark:text-foreground-dark p-4 border-r border-border-light dark:border-border-dark",children:[(0,f.jsx)("div",{className:"mb-8",children:(0,f.jsx)("h1",{className:"text-xl font-bold",children:"Project Dashboard"})}),(0,f.jsx)("nav",{children:(0,f.jsx)("ul",{className:"space-y-2",children:e.map(function(e,t){return(0,f.jsx)("li",{children:(0,f.jsxs)(l.default,{href:e.href,className:"flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-background-light dark:hover:bg-background-dark-secondary transition-colors",children:[e.icon,(0,f.jsx)("span",{children:e.label})]})},t)})})})]})}},9335:function(e,t,n){"use strict";n.d(t,{G2:function(){return d},On:function(){return f}});var r=n(4513),o=n(6871),i=n(7437);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var c={userId:"",score:0,intensity:0,status:"rest",activeTime:0,lastUpdated:new Date().toISOString()},u=(0,o.createContext)(null);function l(e,t){return"UPDATE_FLOW_STATE"===t.type?s(s({},e),t.payload):e}var f=function(e){var t=e.children,n=e.initialFlowState,r=(0,o.useReducer)(l,s(s(s({},c),void 0===n?{}:n),{},{lastUpdated:new Date().toISOString()})),a=r[0],f=r[1];return(0,i.jsx)(u.Provider,{value:{flowState:a,updateFlowState:function(e){f({type:"UPDATE_FLOW_STATE",payload:e})}},children:t})};function d(){var e=(0,o.useContext)(u);if(!e)throw Error("useFlowContext must be used within a FlowProvider");return e}},8818:function(e,t,n){"use strict";n.d(t,{H:function(){return u},O:function(){return l}});var r=n(90),o=n(5977),i=n.n(o),a=n(6871),s=n(7437),c=(0,a.createContext)(null),u=function(e){var t,n,o=e.children,u=e.initialTasks,l=e.mockStartNextTask,f=e.mockRouteTasks,d=e.mockIsRouting,p=e.mockRoutingResult,h=e.mockError,v=(0,a.useState)(void 0===u?[]:u),y=v[0],b=v[1],m=(0,a.useState)(void 0===p?null:p),w=m[0],x=m[1],k=(0,a.useState)(void 0!==d&&d),S=k[0],g=k[1],O=(0,a.useState)(void 0===h?null:h),j=O[0],P=O[1],E=function(){j&&P(null)},C=l||(t=(0,r.Z)(i().mark(function e(t){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,g(!0),E(),t?y.find(function(e){return e.id===t}):y[0]){e.next=6;break}throw Error("Task not found");case 6:g(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),g(!1),P({code:"TASK_START_ERROR",message:"Failed to start task",details:e.t0 instanceof Error?e.t0:Error(String(e.t0))});case 13:case"end":return e.stop()}},e,null,[[0,9]])})),function(e){return t.apply(this,arguments)}),I=f||(n=(0,r.Z)(i().mark(function e(t){var n;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{g(!0),E(),b(t),n={suggestedSequence:t,routingFactors:{flowAlignment:.85,timingOptimality:.9,workloadBalance:.8,contextContinuity:.75,taskScores:t.reduce(function(e,t,n){return e[t.id]=.9-.1*n,e},{})},recommendations:["Focus on the first task in the sequence"],metadata:{routingTimestamp:new Date().toISOString(),flowScore:85,sequenceScore:.85}},x(n),g(!1)}catch(e){g(!1),P({code:"TASK_ROUTING_ERROR",message:"Failed to route tasks",details:e instanceof Error?e:Error(String(e))})}case 1:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)});return(0,s.jsx)(c.Provider,{value:{currentSequence:y,routingResult:w,isRouting:S,error:j,startNextTask:C,routeTasks:I,setError:P},children:o})};function l(){var e=(0,a.useContext)(c);if(!e)throw Error("useTaskRouting must be used within a TaskRoutingProvider");return e}},8839:function(e,t,n){"use strict";n.d(t,{$4:function(){return u},OQ:function(){return c}});var r=n(90),o=n(5977),i=n.n(o),a=n(1080),s=n(6871),c=(0,a.createBrowserClient)("https://mtzhxqdhdxdwxwtfcjup.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im10emh4cWRoZHhkd3h3dGZjanVwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk2Mzk0MjYsImV4cCI6MjA1NTIxNTQyNn0.vhZdFQUAbPG9NQoyblTrHLXBVE2gomijhz_CliAIdy8");function u(){var e=(0,s.useState)(null),t=e[0],n=e[1],o=(0,s.useState)(!0),a=o[0],u=o[1];return(0,s.useEffect)(function(){var e,t=c.auth.onAuthStateChange((e=(0,r.Z)(i().mark(function e(t,r){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n(r),u(!1);case 2:case"end":return e.stop()}},e)})),function(t,n){return e.apply(this,arguments)})).data;return c.auth.getSession().then(function(e){n(e.data.session),u(!1)}),function(){null==t||t.subscription.unsubscribe()}},[]),{supabase:c,session:t,loading:a}}},2778:function(){},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(t,{Z:function(){return r}})}},function(e){e.O(0,[2850,9762,7972,3880,2971,529,1744],function(){return e(e.s=5549)}),_N_E=e.O()}]);